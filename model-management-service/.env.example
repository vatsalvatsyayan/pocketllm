# Model Management Service Environment Configuration
# Copy this file to .env and update values as needed for your environment
# cp .env.example .env

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_MAX_CONNECTIONS=50

# ============================================================================
# PostgreSQL Database Configuration
# ============================================================================
# Leave empty to use placeholder mode (service works without database)
# Format: postgresql+asyncpg://user:password@host:port/database
# Example: postgresql+asyncpg://user:pass@localhost:5432/pocketllm
DATABASE_URL=

# ============================================================================
# Model Server Configuration (Ollama)
# ============================================================================
MODEL_SERVER_URL=http://localhost:11434
MODEL_NAME=tinyllama
MODEL_SERVER_TIMEOUT=30
MODEL_MAX_RETRIES=2
MODEL_RETRY_DELAY=2.0

# ============================================================================
# Cache Configuration
# ============================================================================
# L1 Cache TTL (exact match cache) in seconds (default: 24 hours)
L1_CACHE_TTL=86400

# L2 Cache TTL (semantic similarity cache) in seconds (default: 7 days)
L2_CACHE_TTL=604800

# Semantic similarity threshold for L2 cache (0.0 to 1.0)
CACHE_SIMILARITY_THRESHOLD=0.85

# Session cache TTL in seconds (default: 30 minutes)
SESSION_CACHE_TTL=1800

# ============================================================================
# Queue Configuration
# ============================================================================
MAX_QUEUE_SIZE=50
QUEUE_POLL_INTERVAL=0.5

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
# Maximum requests per hour per IP address
MAX_REQUESTS_PER_HOUR=100

# ============================================================================
# JWT Configuration (not used - authentication removed)
# ============================================================================
JWT_SECRET=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_TOKEN_PREFIX=Bearer

# ============================================================================
# Context Configuration
# ============================================================================
# Maximum context tokens (default: 4096)
MAX_CONTEXT_TOKENS=4096

# Context truncation mode: sliding_window or last_n
CONTEXT_TRUNCATION_MODE=sliding_window

# Maximum number of messages to load from history
MAX_HISTORY_MESSAGES=50

# ============================================================================
# Logging Configuration
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json or text
LOG_FORMAT=json

# ============================================================================
# Application Configuration
# ============================================================================
APP_NAME=Model Management Service
APP_VERSION=1.0.0
DEBUG=false
